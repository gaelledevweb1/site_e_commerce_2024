{% extends 'base.html.twig' %}

{% block title %}Cart index
{% endblock %}

{% block body %}


	{% block content %}
		<h1>votre panier</h1>

		{# {{dump(cart)}}   #}

		<a href="{{path('app_products_index')}}">
			vous souhaitez  mettre de nouveaux articles</a>
		{# {% for product in products %}
													 <div class="cards">
													                    <div class="card">
													                        <div class="ctn">
													                            <h2>PRODUIT</h2>
													                            <div class="wrapper">
													                                <img src="{{asset(product.articleThumbnails  )}}" alt="image de {{ product.articleName }}" >  
													                                <p>référence produit: {{ product.articleRef  }}</p>
													                                <h5 class="card-title
													                                                                                                    ">{{ product.articleName  }}
													                            </h5>
													                                <p class="card-text">{{ product.articleDescription  }}</p> 
													                            </div>
													                        </div>
													                        <div class="ctn">
													                            <h2>QUANTITE</h2>
													                            <div class="wrapper">
													                                <button type="button">+</button>
													                                <p>1</p>
													                                <button type="button">-</button>
																					<a href="{path('app_cart_delete')}">
													                                <button type="reset">supprimer</button></a>
													                                
													                            </div>
													                        </div>
													                        <div class="ctn">
													                            <h2>TOTAL</h2>
													                            <div class="wrapper">
													                                
													                                <p> 29€</p>
													                                
													                            </div>
													                        </div>
													                        
													                        
													                        
													                        
													                    </div> 
										            
													
												{% endfor %} #}


		<section class='row'>
			<div class="col-12">
				<h2>Panier</h2>
			</div>
			<div class="table-responsive">
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col">Produit</th>
							<th scope="col">Prix</th>
							<th scope="col">Quantité</th>
							<th scope="col">Total</th>
							<th scope="col">Action</th>
						</tr>
					</thead>
					<tbody>
						{% for element in data %}
							<tr>

								<td>{{ element.product.articleName}}</td>
								<td>{{element.product.sellPriceHT}}€</td>
								<td>{{element.quantity}}</td>
								<td>{{element.quantity * element.product.sellPriceHT }}€</td>
								<td>
									<a href="{{path('app_cart_add', {'id': element.product.id})}}" class="btn btn-success mr-1">
										<i class="fas fa-plus"></i>
									</a>
									<a href="{{path('app_cart_remove', {'id': element.product.id})}}" class="btn btn-warning mr-1">
										<i class="fas fa-minus"></i>
									</a>
									<a href="{{path('app_cart_delete', {'id': element.product.id})}}" class="btn btn-danger">
										<i class="fas fa-trash"></i>
									</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="5">Votre panier est vide</td>
							</tr>
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<td colspan="3">Total</td>
							<td>{{total}}€</td>
							<td>
								<a href="{{path('app_cart_empty')}}" class="btn btn-danger">
									<i class="fas fa-trash-alt"></i>
									Vider le panier
								</a>
							</td>
						</tr>
					</tfoot>
				</table>
				
				{# {% if data is not empty %}
					<a href="{{path('app_order_new')}}" class='btn btn-primary btn-valider-panier'>
						Valider le panier</a>
				{% endif %} #}

				{% if data is not empty %}
					<a href="{{path('app_order_index')}}" class='btn btn-primary btn-valider-panier'>
						Valider le panier</a>
				{% endif %}
			</div>
		</section>


	{% endblock %}


	{% block footer %}
		{% include 'frag/footer.html.twig' %}
	{% endblock %}
{% endblock %}
